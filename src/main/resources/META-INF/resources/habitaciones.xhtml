<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Catálogo de Habitaciones</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .card {
            background: #fff;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform .3s ease;
        }
        .card:hover { transform: translateY(-5px); }
        .card-img { width: 100%; height: 250px; object-fit: cover; }
        .btn-action { width: 100%; border-radius: 9999px; font-weight: 600; }
    </style>
</h:head>

<h:body styleClass="bg-gray-50 text-gray-800">

    <nav id="navbar" class="fixed top-0 left-0 w-full z-20 transition-all duration-300 bg-transparent">
        <div id="nav-container" class="container mx-auto px-4 py-4 flex justify-between items-center transition-all duration-300">
            <h:link outcome="index.xhtml" class="text-2xl font-bold font-serif text-white transition-colors duration-300 nav-logo">Hotel</h:link>

            <p:menubar id="desktop-menu" styleClass="hidden lg:flex items-center space-x-8 text-white">
                <p:menuitem value="HOTEL" styleClass="nav-link font-medium" outcome="index.xhtml" />

                <p:submenu label="HABITACIONES" styleClass="nav-link font-medium">
                    <p:menuitem value="ESTÁNDAR" outcome="habitaciones.xhtml" />
                    <p:menuitem value="CORNER" outcome="habitaciones.xhtml" />
                    <p:menuitem value="EJECUTIVA" outcome="habitaciones.xhtml" />
                    <p:menuitem value="JUNIOR SUITE" outcome="habitaciones.xhtml" />
                    <p:menuitem value="HANDICAP" outcome="habitaciones.xhtml" />
                </p:submenu>
                <p:menuitem value="RESTAURANTE" styleClass="nav-link font-medium" outcome="restaurante.xhtml" />
                <p:menuitem value="BAR" styleClass="nav-link font-medium" outcome="bar.xhtml" />
            </p:menubar>
            <p:commandButton id="menu-button" styleClass="lg:hidden text-white focus:outline-none" icon="pi pi-bars" />
        </div>
    </nav>

    <section class="py-20 bg-gray-100">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-4xl font-bold mb-12">Nuestras Habitaciones</h2>

            <h:form id="roomForm">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                    <div class="card">
                        <img src="https://images.homify.com/v1452164048/p/photo/image/1227856/3.jpg" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                    <div class="card">
                        <img src="https://placehold.co/600x400/8B5C5C/E3D9C9?text=Habitacion+Estandar" class="card-img"/>
                        <div class="p-6 text-left">
                            <h3 class="text-2xl font-bold">Habitación Estándar</h3>
                            <p class="text-lg font-semibold text-green-600 my-2">$150 por noche</p>

                            <p:commandButton value="Detalles" styleClass="ui-button-secondary btn-action"
                                             actionListener="#{roomBean.showDetails('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('roomDetailsDialog').show();"
                                             update=":roomDetailsPanel :loginForm"/>

                            <p:commandButton value="Reservar" styleClass="ui-button-primary btn-action mt-2"
                                             actionListener="#{roomBean.showReserve('Estandar')}"
                                             oncomplete="if(!args.authenticated) PF('loginDialog').show(); else PF('reserveDialog').show();"
                                             update=":reservationForm :loginForm"/>
                        </div>
                    </div>

                </div>
            </h:form>
        </div>
    </section>

    <p:dialog id="roomDetailsDialog" widgetVar="roomDetailsDialog" header="Detalles de Habitación" modal="true" width="500">
        <h:panelGroup id="roomDetailsPanel">
            <h:outputText value="Detalles de la habitación: #{roomBean.roomName}" />
        </h:panelGroup>
    </p:dialog>

    <p:dialog id="reserveDialog" widgetVar="reserveDialog" header="Reservar Habitación" modal="true" width="500">
        <h:form id="reservationForm">
            <p:panelGrid columns="2" style="width:100%">
                <p:outputLabel for="checkIn" value="Fecha de llegada:" />
                <p:datePicker id="checkIn" value="#{reservationBean.checkIn}" />

                <p:outputLabel for="checkOut" value="Fecha de salida:" />
                <p:datePicker id="checkOut" value="#{reservationBean.checkOut}" />
            </p:panelGrid>
            <p:commandButton value="Confirmar Reserva" actionListener="#{reservationBean.reserve}"
                             update="@form" oncomplete="if (args.reserved) PF('reserveDialog').hide();"/>
        </h:form>
    </p:dialog>

    <p:dialog id="loginDialog" widgetVar="loginDialog" header="Iniciar Sesión" modal="true" width="400">
        <h:form id="loginForm">
            <p:messages id="loginMsg" />
            <p:panelGrid columns="2" style="width:100%">
                <p:outputLabel for="username" value="Usuario:" />
                <p:inputText id="username" value="#{userBean.username}" />

                <p:outputLabel for="password" value="Contraseña:" />
                <p:password id="password" value="#{userBean.password}" feedback="false" />
            </p:panelGrid>
            <p:commandButton value="Ingresar" actionListener="#{userBean.login}"
                             update="loginMsg" oncomplete="if (args.authenticated) PF('loginDialog').hide();"/>
            <p:commandButton value="Registrarse" onclick="PF('registerDialog').show();return false;" type="button"/>
        </h:form>
    </p:dialog>

    <p:dialog id="registerDialog" widgetVar="registerDialog" header="Registrarse" modal="true" width="400">
        <h:form id="registerForm">
            <p:messages id="registerMsg" />
            <p:panelGrid columns="2" style="width:100%">
                <p:outputLabel for="newUsername" value="Usuario:" />
                <p:inputText id="newUsername" value="#{userBean.newUsername}" />

                <p:outputLabel for="newEmail" value="Correo:" />
                <p:inputText id="newEmail" value="#{userBean.newEmail}" />

                <p:outputLabel for="newPassword" value="Contraseña:" />
                <p:password id="newPassword" value="#{userBean.newPassword}" feedback="true" />

                <p:outputLabel for="confirmPassword" value="Confirmar:" />
                <p:password id="confirmPassword" value="#{userBean.confirmPassword}" feedback="true" />
            </p:panelGrid>
            <p:commandButton value="Registrar" actionListener="#{userBean.register}"
                             update="registerMsg" oncomplete="if (args.registered) PF('registerDialog').hide();"/>
        </h:form>
    </p:dialog>

</h:body>
</html>